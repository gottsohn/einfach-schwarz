!function(e){e.fn.preserveAspectRatio=function(t){this.each(function(){e(this).attr("data-aspectRatio",this.height/this.width).removeAttr("height").removeAttr("width")});var o=e(window),i=this;o.on("resize",function(){var o=t.width();i.each(function(){var t=e(this);t.attr("width",o).attr("height",o*t.attr("data-aspectRatio"))})}).resize()}}(jQuery),function(e){e.fn.extend({scrollTo:function(t){var o={speed:250};t=e.extend(o,t);var i=e(this);i.on("click",function(o){o.preventDefault();var a=i.attr("href"),n=e(a).offset().top,s=e("html, body");s.velocity("scroll",{duration:t.speed,offset:n})})}})}(jQuery),function(){function e(){o.velocity("fadeOut",{duration:250}),a.removeClass("hidden"),s.addClass("scaled"),n.addClass("revealed")}function t(){n.removeClass("revealed"),s.removeClass("scaled"),a.addClass("hidden"),o.velocity("fadeIn",{duration:250})}var o=$(".site-header__open-nav"),i=$(".site-nav__close-nav"),a=$(".site-nav"),n=$(".screen"),s=$(".container");o.on("click",e),i.on("click",t),n.on("click",t)}(),function(){$(".posts").on("click",".post-options__toggle-share",function(e){function t(){a=window.setTimeout(function(){i.hide()},500)}e.preventDefault();var o=$(this),i=o.siblings(".post-share");i.toggle(),o.addClass("timer"),i.addClass("timer");var a;$(".timer").on("mouseenter",function(){window.clearTimeout(a)}).on("mouseleave",function(){t()})})}(),function(e){e.fn.extend({infiniteScroll:function(t){function o(){var e,o=location.href;return e=o.indexOf("/tagged/")>=0||o.indexOf("/search/")>=0?o+"/page/"+t.page:"/page/"+t.page}function i(){r.html(t.loadingText),e.ajax(o()).done(function(o){var i=e(o).find(".post"),a="iframe[src*='tumblr.com/video'], iframe[src*='vimeo.com'], iframe[src*='youtube.com'], iframe[src*='soundcloud.com'], iframe[src*='spotify.com'], iframe[src*='instagram.com']";if(i.find(a).preserveAspectRatio(e(".post__inner")),i.length){s.append(i),s.imagesLoaded(function(){s.masonry("appended",i)}),e(".post--photo__photoset").photosetGrid({gutter:3,highresLinks:!0});var d={delegate:"a",type:"image",gallery:{enabled:!0,navigateByImgClick:!0,arrowMarkup:""},image:{markup:'<div class="mfp-figure"><div class="mfp-img"></div></div>'}};e(".post--photo__photoset").each(function(){e(this).magnificPopup(d)}),t.page++}else clearInterval(c),r.html(t.noMorePostsText),setTimeout(function(){r.velocity("fadeOut",{duration:300})},3e3);n=!1})}var a={page:2,loadingText:"Loading",noMorePostsText:"No more posts"};t=e.extend(a,t);var n=!1,s=this,r=e(".pagination.infinite-scroll"),c=setInterval(function(){!n&&e(window).scrollTop()>=e(document).height()-2*e(window).height()&&(n=!0,i())},300)}})}(jQuery),function(){function e(){var e=$(this);e.addClass("scale-lock"),e.find(".fa-expand").addClass("move-out"),e.find(".fa-circle-o-notch").addClass("move-in fa-spin");var t=$("<div>").addClass("lightbox"),o=$("<img>").attr("src",e.parents(".post--photo").find("img").data("highres"));o.on("load",function(){e.removeClass("scale-lock"),e.find(".fa-expand").removeClass("move-out"),e.find(".fa-circle-o-notch").removeClass("move-in fa-spin"),$("body").append(t),$(".lightbox").html(o),$(".lightbox").velocity("fadeIn",{duration:300})})}function t(){$(".lightbox").fadeOut(function(){$(this).remove()})}$("body").on("click",".post--photo__highres-toggle",e),$("body").on("click",".lightbox",t)}(),$(function(){$(".site-header__scroll-hint").scrollTo(),$(".post--photo__photoset").photosetGrid({gutter:3,highresLinks:!0});var e={delegate:"a",type:"image",gallery:{enabled:!0,navigateByImgClick:!0,arrowMarkup:""},image:{markup:'<div class="mfp-figure"><div class="mfp-img"></div></div>'}};$(".post--photo__photoset").each(function(){$(this).magnificPopup(e)});var t=$("body"),o=$(".post__inner"),i="iframe[src*='tumblr.com/video'], iframe[src*='vimeo.com'], iframe[src*='youtube.com'], iframe[src*='soundcloud.com'], iframe[src*='spotify.com'], iframe[src*='instagram.com']";t.find(i).preserveAspectRatio(o)});
